import{b as U,d as te}from"./chunk-MKY23WEX.js";import"./chunk-IFWEQR6X.js";import{a as Y}from"./chunk-Z6BJ3VAL.js";import{e as X,m as Z,o as $}from"./chunk-KCSS7B5E.js";import{A as G,L as j,O as z,P as K,S as J,T as Q,y as A}from"./chunk-QAQD3BIS.js";import{a as ee}from"./chunk-IFMKWS56.js";import"./chunk-7MJ4RZQ5.js";import{Ha as N,Ka as W,Ma as H,Ra as O,mb as B,na as F,ra as P,sb as q}from"./chunk-RCA4OQZM.js";import{Eb as r,F as V,Fb as i,Gb as u,Kb as C,L as k,Mb as h,Nb as c,Rc as R,Va as m,Yb as M,Zb as _,_b as E,aa as b,ab as I,bc as x,cc as w,dc as v,fc as S,gb as D,ia as l,ja as s,n as T,nb as y,tc as f,vb as g,yb as L}from"./chunk-ZNCIKLRF.js";var oe=()=>["name","country.name","representative.name","status"],re=()=>[10,20,30],ne=()=>({width:"450px"});function ae(o,t){if(o&1){let e=C();r(0,"p-button",11),h("click",function(){l(e);let n=c();return s(n.newCategory())}),i(),r(1,"p-button",12),h("click",function(){l(e);let n=c();return s(n.deleteSelectedCategories())}),i()}if(o&2){let e=c();m(),g("disabled",e.selectedCategories.length==0)}}function le(o,t){o&1&&u(0,"p-button",13)}function se(o,t){if(o&1){let e=C();r(0,"div",14)(1,"h5",15),_(2,"Categories"),i(),r(3,"p-iconfield"),u(4,"p-inputicon",16),r(5,"input",17),h("input",function(n){l(e);let d=c(),p=M(6);return s(d.onGlobalFilter(p,n))}),i()()()}}function me(o,t){o&1&&(r(0,"tr")(1,"th",18),u(2,"p-tableHeaderCheckbox"),i(),r(3,"th",18),_(4,"Id"),i(),r(5,"th",19),_(6," Name "),u(7,"p-sortIcon",20),i(),u(8,"th",21),i())}function ce(o,t){if(o&1){let e=C();r(0,"tr")(1,"td"),u(2,"p-tableCheckbox",22),i(),r(3,"td"),_(4),i(),r(5,"td"),_(6),i(),r(7,"td")(8,"p-button",23),h("click",function(){let n=l(e).$implicit,d=c();return s(d.editCategory(n))}),i()()()}if(o&2){let e=t.$implicit;m(2),g("value",e),m(2),E(e.id),m(2),E(e.name),m(2),g("rounded",!0)("outlined",!0)}}function pe(o,t){o&1&&(r(0,"small",29),_(1,"Name is required."),i())}function ge(o,t){if(o&1){let e=C();r(0,"app-loading",24)(1,"div",25)(2,"div")(3,"label",26),_(4,"Name"),i(),r(5,"input",27),v("ngModelChange",function(n){l(e);let d=c();return w(d.category.name,n)||(d.category.name=n),s(n)}),i(),y(6,pe,2,0,"small",28),i()()()}if(o&2){let e=c();g("loading",e.formLoading),m(5),x("ngModel",e.category.name),m(),g("ngIf",e.submitted&&!e.category.name)}}function de(o,t){if(o&1){let e=C();r(0,"p-button",30),h("click",function(){l(e);let n=c();return s(n.closeDialog())}),i(),r(1,"p-button",31),h("click",function(){l(e);let n=c();return s(n.saveCategory())}),i()}}var ie=class o{service=b(U);message=b(P);confirmationService=b(F);categories=I([]);selectedCategories=[];category={name:""};categoryDialog=!1;submitted=!1;formLoading=!1;tableLoading=!1;cols=[{field:"id",header:"Id",customExportHeader:"id"},{field:"name",header:"name"}];ngOnInit(){this.fetchCategories()}fetchCategories(){this.tableLoading=!0,this.service.getAll().subscribe({next:t=>{this.tableLoading=!1,this.categories.set(t)},error:t=>{this.message.add({severity:"error",summary:"Error",detail:t.error.message}),this.tableLoading=!1}})}onGlobalFilter(t,e){t.filterGlobal(e.target.value,"contains")}newCategory(){this.category={name:""},this.submitted=!1,this.categoryDialog=!0}saveCategory(){this.submitted=!0,this.category.name.trim()&&(this.formLoading=!0,this.category.id?this.service.update(this.category.id,this.category).subscribe({next:()=>{this.categoryDialog=!1,this.submitted=!1,this.formLoading=!1,this.fetchCategories()},error:t=>{this.message.add({severity:"error",summary:"Error",detail:t.error.message}),this.formLoading=!1},complete:()=>{console.log("Category update completed")}}):this.service.create(this.category).subscribe({next:()=>{this.categoryDialog=!1,this.submitted=!1,this.category={name:""},this.formLoading=!1,this.fetchCategories()},error:t=>{this.message.add({severity:"error",summary:"Error",detail:t.error.message}),this.formLoading=!1},complete:()=>{console.log("Category creation completed")}}))}deleteCategory(t){throw new Error("Method not implemented.")}editCategory(t){this.category={id:t.id,name:t.name},this.submitted=!1,this.categoryDialog=!0}closeDialog(){this.categoryDialog=!1,this.submitted=!1}deleteSelectedCategories(){this.confirmationService.confirm({message:"Are you sure you want to delete the selected categories?",header:"Confirm",icon:"pi pi-exclamation-triangle",accept:()=>{this.tableLoading=!0,T(this.selectedCategories).pipe(V(t=>this.service.delete(t.id)),k(()=>{this.fetchCategories(),this.selectedCategories=[],this.tableLoading=!1,this.message.add({severity:"success",summary:"Success",detail:"Categories deleted successfully"})})).subscribe({error:t=>{this.message.add({severity:"error",summary:"Error",detail:t.error.message})}})}})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=D({type:o,selectors:[["app-categories"]],decls:20,vars:17,consts:[["start",""],["end",""],["dt",""],["caption",""],["header",""],["body",""],["content",""],["footer",""],["styleClass","mb-6"],["dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} products",3,"selectionChange","loading","value","rows","columns","paginator","globalFilterFields","selection","rowHover","showCurrentPageReport","rowsPerPageOptions"],["header","Category Details",3,"visibleChange","visible","modal"],["label","New","icon","pi pi-plus","severity","secondary",1,"mr-2",3,"click"],["severity","secondary","label","Delete","icon","pi pi-trash","outlined","",3,"click","disabled"],["label","Export","icon","pi pi-upload","severity","secondary"],[1,"flex","items-center","justify-between"],[1,"m-0"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Search...",3,"input"],[2,"width","3rem"],["pSortableColumn","name"],["field","name"],[2,"width","5rem"],[3,"value"],["icon","pi pi-pencil",1,"mr-2",3,"click","rounded","outlined"],[3,"loading"],[1,"flex","flex-col","gap-6","min-h-80"],["for","name",1,"block","font-bold","mb-3"],["type","text","pInputText","","id","name","required","","autofocus","","fluid","",3,"ngModelChange","ngModel"],["class","text-red-500",4,"ngIf"],[1,"text-red-500"],["label","Cancel","icon","pi pi-times","text","",3,"click"],["label","Save","icon","pi pi-check",3,"click"]],template:function(e,a){if(e&1){let n=C();r(0,"p-toolbar",8),y(1,ae,2,1,"ng-template",null,0,f)(3,le,1,0,"ng-template",null,1,f),i(),r(5,"p-table",9,2),v("selectionChange",function(p){return l(n),w(a.selectedCategories,p)||(a.selectedCategories=p),s(p)}),y(7,se,6,0,"ng-template",null,3,f)(9,me,9,0,"ng-template",null,4,f)(11,ce,9,5,"ng-template",null,5,f),i(),r(13,"p-dialog",10),v("visibleChange",function(p){return l(n),w(a.categoryDialog,p)||(a.categoryDialog=p),s(p)}),y(14,ge,7,3,"ng-template",null,6,f)(16,de,2,0,"ng-template",null,7,f),i(),u(18,"p-toast")(19,"p-confirmdialog")}e&2&&(m(5),g("loading",a.tableLoading)("value",a.categories())("rows",10)("columns",a.cols)("paginator",!0)("globalFilterFields",S(14,oe)),x("selection",a.selectedCategories),g("rowHover",!0)("showCurrentPageReport",!0)("rowsPerPageOptions",S(15,re)),m(8),L(S(16,ne)),x("visible",a.categoryDialog),g("modal",!0))},dependencies:[te,R,j,z,K,J,Q,N,W,O,H,B,Z,$,q,X,G,A,Y,ee],encapsulation:2})};export{ie as CategoriesComponent};
