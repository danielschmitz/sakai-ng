import{a as me,b as ce,c as ke,d as M}from"./chunk-MKY23WEX.js";import{a as _e,c as fe,d as be,e as Ce,g as Te}from"./chunk-IFWEQR6X.js";import{a as ue}from"./chunk-Z6BJ3VAL.js";import{e as P,o as ge}from"./chunk-KCSS7B5E.js";import{A as oe,L as se,O as re,P as le,S as pe,T as de,y as ae}from"./chunk-QAQD3BIS.js";import"./chunk-IFMKWS56.js";import"./chunk-7MJ4RZQ5.js";import{Ha as Y,Ka as Z,Ma as $,Wa as ee,lb as te,mb as ie,na as Q,ra as X,sb as L,ub as ne}from"./chunk-RCA4OQZM.js";import{$b as H,Eb as n,F as U,Fb as a,Gb as T,Kb as k,L as j,Mb as _,Nb as g,Pc as q,Qc as G,Rc as J,Va as l,W as A,Yb as z,Zb as c,_b as v,a as F,aa as S,ab as D,b as B,bc as f,cc as b,dc as C,fc as y,gb as E,gc as I,ia as d,ja as m,n as R,nb as h,ra as w,tc as x,vb as u,yb as V}from"./chunk-ZNCIKLRF.js";var O=class s extends me{constructor(){super("tasks")}getAllTasks(){return this.http.get(`${this.apiBaseUrl}/all`)}static \u0275fac=function(e){return new(e||s)};static \u0275prov=A({token:s,factory:s.\u0275fac,providedIn:"root"})};var Ee=()=>({width:"450px",height:"auto"}),Ve=s=>({"ng-invalid ng-dirty":s}),he=s=>({"ng-invalid ng-dirty":s,"w-full":!0}),Me=s=>({"ng-invalid":s});function Ie(s,t){s&1&&(n(0,"small",15),c(1,"Name is required."),a())}function Fe(s,t){s&1&&(n(0,"small",15),c(1,"Description is required."),a())}function Le(s,t){s&1&&(n(0,"small",15),c(1,"Category is required."),a())}function Pe(s,t){if(s&1){let e=k();n(0,"div",3)(1,"p-floatlabel",4)(2,"p-dropdown",5),C("ngModelChange",function(o){d(e);let r=g();return b(r.task.categoryId,o)||(r.task.categoryId=o),m(o)}),a(),n(3,"label",6),c(4,"Category"),a()(),n(5,"p-floatlabel",4)(6,"input",7),C("ngModelChange",function(o){d(e);let r=g();return b(r.task.name,o)||(r.task.name=o),m(o)}),a(),n(7,"label",8),c(8,"Name"),a()(),h(9,Ie,2,0,"small",9),n(10,"p-floatlabel",4)(11,"input",10),C("ngModelChange",function(o){d(e);let r=g();return b(r.task.description,o)||(r.task.description=o),m(o)}),a(),n(12,"label",11),c(13,"Description"),a()(),h(14,Fe,2,0,"small",9)(15,Le,2,0,"small",9),n(16,"div",12)(17,"p-checkbox",13),C("ngModelChange",function(o){d(e);let r=g();return b(r.task.done,o)||(r.task.done=o),m(o)}),a(),n(18,"label",14),c(19,"Done"),a()()()}if(s&2){let e=g();l(2),u("options",e.categories()),f("ngModel",e.task.categoryId),u("ngClass",I(13,Ve,e.submitted&&!e.task.categoryId)),l(4),f("ngModel",e.task.name),u("ngClass",I(15,he,e.submitted&&!e.task.name)),l(3),u("ngIf",e.submitted&&!e.task.name),l(2),f("ngModel",e.task.description),u("ngClass",I(17,he,e.submitted&&!e.task.description)),l(3),u("ngIf",e.submitted&&!e.task.description),l(),u("ngIf",e.submitted&&!e.task.categoryId),l(2),f("ngModel",e.task.done),u("binary",!0)("ngClass",I(19,Me,e.submitted&&e.task.done===void 0))}}function Oe(s,t){if(s&1){let e=k();n(0,"button",16),_("click",function(){d(e);let o=g();return m(o.onHide())}),a(),n(1,"button",17),_("click",function(){d(e);let o=g();return m(o.onSave())}),a()}if(s&2){let e=g();l(),u("loading",e.loading)}}var W=class s{visible=!1;task={name:"",description:"",done:0,categoryId:0};submitted=!1;loading=!1;visibleChange=new w;save=new w;cancel=new w;categoryService=S(ce);categories=D([]);ngOnInit(){this.loadCategories()}loadCategories(){this.categoryService.getAll().subscribe({next:t=>{this.categories.set(t)}})}onHide(){this.visibleChange.emit(!1),this.cancel.emit()}onSave(){this.save.emit(this.task)}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=E({type:s,selectors:[["app-task-form"]],inputs:{visible:"visible",task:"task",submitted:"submitted",loading:"loading"},outputs:{visibleChange:"visibleChange",save:"save",cancel:"cancel"},decls:5,vars:5,consts:[["content",""],["footer",""],["header","Task Details",1,"p-fluid",3,"visibleChange","onHide","visible","modal"],[1,"flex","flex-col","gap-4","py-2"],["variant","on"],["id","category","optionLabel","name","optionValue","id",3,"ngModelChange","options","ngModel","ngClass"],["for","category"],["type","text","id","name","pInputText","",3,"ngModelChange","ngModel","ngClass"],["for","name"],["class","p-error",4,"ngIf"],["type","text","id","description","pInputText","",3,"ngModelChange","ngModel","ngClass"],["for","description"],[1,"flex","flex-row"],["id","done",3,"ngModelChange","ngModel","binary","ngClass"],["for","done",1,"ml-2"],[1,"p-error"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",1,"p-button-text",3,"click","loading"]],template:function(e,i){if(e&1){let o=k();n(0,"p-dialog",2),C("visibleChange",function(p){return d(o),b(i.visible,p)||(i.visible=p),m(p)}),_("onHide",function(){return d(o),m(i.onHide())}),h(1,Pe,20,21,"ng-template",null,0,x)(3,Oe,2,1,"ng-template",null,1,x),a()}e&2&&(V(y(4,Ee)),f("visible",i.visible),u("modal",!0))},dependencies:[M,q,J,Y,Z,$,te,ee,L,P,_e,ke,ne],styles:[".field[_ngcontent-%COMP%]{margin-bottom:1.5rem}.field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%}.field[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{margin-top:.25rem;display:block}.field[_ngcontent-%COMP%]:last-child{margin-bottom:0}[_nghost-%COMP%]     .p-dropdown{width:100%}[_nghost-%COMP%]     .p-checkbox{margin-right:.5rem}"]})};var We=()=>({width:"800px"}),Ke=()=>["done-list"],He=()=>["todo-list"];function Ne(s,t){if(s&1){let e=k();n(0,"div",9),_("dblclick",function(){let o=d(e).$implicit,r=g();return m(r.onTaskDoubleClick(o))}),n(1,"div",10)(2,"div",11),c(3),a(),n(4,"div",12),c(5,"\u274C"),a()(),n(6,"div",13),c(7),a(),n(8,"div",14),c(9),a()()}if(s&2){let e=t.$implicit;l(3),v(e.name),l(4),v(e.description),l(2),H("\u{1F3F7}\uFE0F ",e.category,"")}}function Be(s,t){if(s&1){let e=k();n(0,"div",9),_("dblclick",function(){let o=d(e).$implicit,r=g();return m(r.onTaskDoubleClick(o))}),n(1,"div",10)(2,"div",11),c(3),a(),n(4,"div",12),c(5,"\u2705"),a()(),n(6,"div",13),c(7),a(),n(8,"div",14),c(9),a()()}if(s&2){let e=t.$implicit;l(3),v(e.name),l(4),v(e.description),l(2),H("\u{1F3F7}\uFE0F ",e.category,"")}}var K=class s{set visible(t){this._visible=t}get visible(){return this._visible}visibleChange=new w;set tasks(t){this._tasks=t,this.updateTaskLists()}taskUpdated=new w;editTask=new w;_visible=!1;_tasks=[];todoTasks=D([]);doneTasks=D([]);updateTaskLists(){this.todoTasks.set(this._tasks.filter(t=>!t.done)),this.doneTasks.set(this._tasks.filter(t=>t.done))}onHide(){this.visibleChange.emit(!1)}onTaskDoubleClick(t){this.editTask.emit(t)}drop(t){if(t.previousContainer===t.container)fe(t.container.data,t.previousIndex,t.currentIndex);else{be(t.previousContainer.data,t.container.data,t.previousIndex,t.currentIndex);let e=t.container.data[t.currentIndex],i=B(F({},e),{done:t.container.id==="done-list"?1:0});this.taskUpdated.emit(i)}}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=E({type:s,selectors:[["app-task-kanban"]],inputs:{visible:"visible",tasks:"tasks"},outputs:{visibleChange:"visibleChange",taskUpdated:"taskUpdated",editTask:"editTask"},decls:14,vars:13,consts:[["todoList","cdkDropList"],["doneList","cdkDropList"],["header","Task Kanban \u{1F4CB}",3,"visibleChange","onHide","visible","modal"],[1,"flex","gap-4"],[1,"flex-1","kanban-column"],[1,"text-xl","font-bold","mb-4"],["cdkDropList","","id","todo-list",1,"kanban-list",3,"cdkDropListDropped","cdkDropListData","cdkDropListConnectedTo"],["class","kanban-item","cdkDrag","",3,"dblclick",4,"ngFor","ngForOf"],["cdkDropList","","id","done-list",1,"kanban-list",3,"cdkDropListDropped","cdkDropListData","cdkDropListConnectedTo"],["cdkDrag","",1,"kanban-item",3,"dblclick"],[1,"flex","justify-content-between","align-items-center"],[1,"font-bold"],[1,"emoji"],[1,"text-sm","text-gray-600"],[1,"text-xs","text-blue-600"]],template:function(e,i){if(e&1){let o=k();n(0,"p-dialog",2),C("visibleChange",function(p){return d(o),b(i.visible,p)||(i.visible=p),m(p)}),_("onHide",function(){return d(o),m(i.onHide())}),n(1,"div",3)(2,"div",4)(3,"h3",5),c(4,"\u{1F4DD} To Do"),a(),n(5,"div",6,0),_("cdkDropListDropped",function(p){return d(o),m(i.drop(p))}),h(7,Ne,10,3,"div",7),a()(),n(8,"div",4)(9,"h3",5),c(10,"\u2705 Done"),a(),n(11,"div",8,1),_("cdkDropListDropped",function(p){return d(o),m(i.drop(p))}),h(13,Be,10,3,"div",7),a()()()()}e&2&&(V(y(10,We)),f("visible",i.visible),u("modal",!0),l(5),u("cdkDropListData",i.todoTasks())("cdkDropListConnectedTo",y(11,Ke)),l(2),u("ngForOf",i.todoTasks()),l(4),u("cdkDropListData",i.doneTasks())("cdkDropListConnectedTo",y(12,He)),l(2),u("ngForOf",i.doneTasks()))},dependencies:[M,G,P,Te,Ce],styles:[".kanban-column[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:8px;padding:1rem}.kanban-column[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.kanban-list[_ngcontent-%COMP%]{min-height:400px}.kanban-item[_ngcontent-%COMP%]{background:#fff;border:1px solid #dee2e6;border-radius:4px;padding:1rem;margin-bottom:.5rem;cursor:move;transition:box-shadow .3s}.kanban-item[_ngcontent-%COMP%]:hover{box-shadow:0 2px 4px #0000001a}.kanban-item[_ngcontent-%COMP%]   .emoji[_ngcontent-%COMP%]{font-size:1.2rem}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.kanban-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .kanban-item[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"]})};var Re=()=>["name","description","category"],Ue=()=>[10,20,30],je=()=>({width:"450px"});function Ae(s,t){if(s&1){let e=k();n(0,"p-button",10),_("click",function(){d(e);let o=g();return m(o.newTask())}),a(),n(1,"p-button",11),_("click",function(){d(e);let o=g();return m(o.showKanban())}),a(),n(2,"p-button",12),_("click",function(){d(e);let o=g();return m(o.deleteSelectedTasks())}),a()}if(s&2){let e=g();l(2),u("disabled",e.selectedTasks.length==0)}}function ze(s,t){s&1&&T(0,"p-button",13)}function qe(s,t){if(s&1){let e=k();n(0,"div",14)(1,"h5",15),c(2,"Tasks"),a(),n(3,"p-iconfield"),T(4,"p-inputicon",16),n(5,"input",17),_("input",function(o){d(e);let r=g(),p=z(6);return m(r.onGlobalFilter(p,o))}),a()()()}}function Ge(s,t){s&1&&(n(0,"tr")(1,"th",18),T(2,"p-tableHeaderCheckbox"),a(),n(3,"th",19),c(4," Name "),T(5,"p-sortIcon",20),a(),n(6,"th",21),c(7," Description "),T(8,"p-sortIcon",22),a(),n(9,"th",23),c(10," Done "),T(11,"p-sortIcon",24),a(),n(12,"th",25),c(13," Category "),T(14,"p-sortIcon",26),a(),T(15,"th",27),a())}function Je(s,t){if(s&1){let e=k();n(0,"tr")(1,"td"),T(2,"p-tableCheckbox",28),a(),n(3,"td"),c(4),a(),n(5,"td"),c(6),a(),n(7,"td"),c(8),a(),n(9,"td"),c(10),a(),n(11,"td")(12,"p-button",29),_("click",function(){let o=d(e).$implicit,r=g();return m(r.editTask(o))}),a()()()}if(s&2){let e=t.$implicit,i=g();l(2),u("value",e),l(2),v(e.name),l(2),v(e.description),l(2),v(i.getDoneEmoji(e.done)),l(2),v(e.category),l(2),u("rounded",!0)("outlined",!0)}}var ye=class s{service=S(O);message=S(X);confirmationService=S(Q);tasks=D([]);selectedTasks=[];task={name:"",description:"",done:0,categoryId:0};taskDialog=!1;kanbanDialog=!1;submitted=!1;formLoading=!1;tableLoading=!1;cols=[{field:"name",header:"Name"},{field:"description",header:"Description"},{field:"done",header:"Done"},{field:"category",header:"Category"}];ngOnInit(){this.fetchTasks()}fetchTasks(){this.tableLoading=!0,this.service.getAllTasks().subscribe({next:t=>{this.tableLoading=!1,this.tasks.set(t)},error:t=>{this.message.add({severity:"error",summary:"Error",detail:t.error.message}),this.tableLoading=!1}})}getDoneEmoji(t){return t?"\u2705":"\u274C"}newTask(){this.task={name:"",description:"",done:0,categoryId:0},this.submitted=!1,this.taskDialog=!0}showKanban(){this.kanbanDialog=!0}onTaskUpdated(t){this.service.update(t.id,t).subscribe({next:()=>{this.fetchTasks(),this.message.add({severity:"success",summary:"Successful",detail:"Task Updated",life:3e3})},error:e=>{this.message.add({severity:"error",summary:"Error",detail:e.error.message})}})}deleteSelectedTasks(){this.confirmationService.confirm({message:"Are you sure you want to delete the selected tasks?",header:"Confirm",icon:"pi pi-exclamation-triangle",accept:()=>{R(this.selectedTasks).pipe(U(t=>this.service.delete(t.id)),j(()=>{this.selectedTasks=[],this.fetchTasks(),this.message.add({severity:"success",summary:"Successful",detail:"Tasks Deleted",life:3e3})})).subscribe()}})}editTask(t){this.task=F({},t),this.taskDialog=!0}deleteTask(t){this.confirmationService.confirm({message:"Are you sure you want to delete "+t.name+"?",header:"Confirm",icon:"pi pi-exclamation-triangle",accept:()=>{this.service.delete(t.id).subscribe({next:()=>{this.fetchTasks(),this.message.add({severity:"success",summary:"Successful",detail:"Task Deleted",life:3e3})}})}})}hideDialog(){this.taskDialog=!1,this.submitted=!1}saveTask(t){this.submitted=!0,this.formLoading=!0,t.name?.trim()&&t.description?.trim()&&t.categoryId&&(t.id?this.service.update(t.id,t).subscribe({next:()=>{this.fetchTasks(),this.message.add({severity:"success",summary:"Successful",detail:"Task Updated",life:3e3}),this.taskDialog=!1,this.task={name:"",description:"",done:0,categoryId:0}},error:e=>{this.message.add({severity:"error",summary:"Error",detail:e.error.message})},complete:()=>{this.formLoading=!1}}):this.service.create(t).subscribe({next:()=>{this.fetchTasks(),this.message.add({severity:"success",summary:"Successful",detail:"Task Created",life:3e3}),this.taskDialog=!1,this.task={name:"",description:"",done:0,categoryId:0}},error:e=>{this.message.add({severity:"error",summary:"Error",detail:e.error.message})},complete:()=>{this.formLoading=!1}}))}onGlobalFilter(t,e){t.filterGlobal(e.target.value,"contains")}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=E({type:s,selectors:[["app-tasks"]],decls:16,vars:21,consts:[["start",""],["end",""],["dt",""],["caption",""],["header",""],["body",""],["styleClass","mb-6"],["dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} tasks",3,"selectionChange","loading","value","rows","columns","paginator","globalFilterFields","selection","rowHover","showCurrentPageReport","rowsPerPageOptions"],[3,"visibleChange","save","cancel","visible","task","submitted","loading"],[3,"visibleChange","taskUpdated","editTask","visible","tasks"],["label","New","icon","pi pi-plus","severity","secondary",1,"mr-2",3,"click"],["label","Kanban","icon","pi pi-th-large","severity","secondary",1,"mr-2",3,"click"],["severity","secondary","label","Delete","icon","pi pi-trash","outlined","",3,"click","disabled"],["label","Export","icon","pi pi-upload","severity","secondary"],[1,"flex","items-center","justify-between"],[1,"m-0"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Search...",3,"input"],[2,"width","3rem"],["pSortableColumn","name"],["field","name"],["pSortableColumn","description"],["field","description"],["pSortableColumn","done"],["field","done"],["pSortableColumn","category"],["field","category"],[2,"width","5rem"],[3,"value"],["icon","pi pi-pencil",1,"mr-2",3,"click","rounded","outlined"]],template:function(e,i){if(e&1){let o=k();n(0,"p-toolbar",6),h(1,Ae,3,1,"ng-template",null,0,x)(3,ze,1,0,"ng-template",null,1,x),a(),n(5,"p-table",7,2),C("selectionChange",function(p){return d(o),b(i.selectedTasks,p)||(i.selectedTasks=p),m(p)}),h(7,qe,6,0,"ng-template",null,3,x)(9,Ge,16,0,"ng-template",null,4,x)(11,Je,13,7,"ng-template",null,5,x),a(),n(13,"app-task-form",8),C("visibleChange",function(p){return d(o),b(i.taskDialog,p)||(i.taskDialog=p),m(p)}),_("save",function(p){return d(o),m(i.saveTask(p))})("cancel",function(){return d(o),m(i.hideDialog())}),a(),n(14,"app-task-kanban",9),C("visibleChange",function(p){return d(o),b(i.kanbanDialog,p)||(i.kanbanDialog=p),m(p)}),_("taskUpdated",function(p){return d(o),m(i.onTaskUpdated(p))})("editTask",function(p){return d(o),m(i.editTask(p))}),a(),T(15,"p-confirmDialog")}e&2&&(l(5),u("loading",i.tableLoading)("value",i.tasks())("rows",10)("columns",i.cols)("paginator",!0)("globalFilterFields",y(18,Re)),f("selection",i.selectedTasks),u("rowHover",!0)("showCurrentPageReport",!0)("rowsPerPageOptions",y(19,Ue)),l(8),f("visible",i.taskDialog),u("task",i.task)("submitted",i.submitted)("loading",i.formLoading),l(),f("visible",i.kanbanDialog),u("tasks",i.tasks()),l(),V(y(20,je)))},dependencies:[M,se,re,le,pe,de,ie,ge,L,oe,ae,ue,W,K],encapsulation:2})};export{ye as TasksComponent};
