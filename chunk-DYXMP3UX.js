import{a as we,b as A}from"./chunk-J4XW3KFC.js";import{e as ve,f as $,h as q,j as G,l as z,m as Te,n as K,o as Se,p as J}from"./chunk-D6GK62JO.js";import{A as Ce,B as W,F as j,J as U,K as _e,N as he,O as be,R as ye,S as xe,U as H,x as O,y as fe,z as P}from"./chunk-FOX4DJQB.js";import{a as M}from"./chunk-ON7IIPCB.js";import{a as de}from"./chunk-7MJ4RZQ5.js";import{Ha as se,Ka as me,Ma as pe,Ra as ce,Ta as F,Xa as R,b as le,mb as ge,na as S,nb as B,ra as E,sb as ue,tb as N}from"./chunk-N7CYNTFY.js";import{$ as b,$a as te,Db as r,E as X,Eb as o,Fb as u,Jb as _,K as Y,Lb as h,Mb as p,Qc as ae,Ua as m,V as Z,W as ee,Xb as ne,Yb as f,Yc as L,Zb as D,ac as x,bc as v,cc as w,ec as T,fb as ie,gb as oe,ha as l,ia as s,mb as y,n as Q,sc as C,ub as d,xb as re}from"./chunk-EIGNSBGS.js";var I=class{constructor(e){this.resourceName=e;this.apiBaseUrl=`${de.baseUrl}/${e}`}http=b(le);apiBaseUrl;getAll(){return this.http.get(`${this.apiBaseUrl}`)}getById(e){return this.http.get(`${this.apiBaseUrl}/${e}`)}create(e){return this.http.post(`${this.apiBaseUrl}`,e)}update(e,t){return this.http.put(`${this.apiBaseUrl}/${e}`,t)}delete(e){return this.http.delete(`${this.apiBaseUrl}/${e}`)}};var V=class i extends I{constructor(){super("categories")}static \u0275fac=function(t){return new(t||i)};static \u0275prov=Z({token:i,factory:i.\u0275fac,providedIn:"root"})};var k=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=oe({type:i});static \u0275inj=ee({providers:[E,S],imports:[L,H,F,B,R,K,J,q,N,z,j,U,O,$,G,W,P,A,M,L,H,F,B,R,K,J,q,N,z,j,U,O,$,G,W,P,A]})};var Ie=()=>["name","country.name","representative.name","status"],Ve=()=>[10,20,30],ke=()=>({width:"450px"});function De(i,e){if(i&1){let t=_();r(0,"p-button",11),h("click",function(){l(t);let n=p();return s(n.newCategory())}),o(),r(1,"p-button",12),h("click",function(){l(t);let n=p();return s(n.deleteSelectedCategories())}),o()}if(i&2){let t=p();m(),d("disabled",t.selectedCategories.length==0)}}function Le(i,e){i&1&&u(0,"p-button",13)}function Fe(i,e){if(i&1){let t=_();r(0,"div",14)(1,"h5",15),f(2,"Categories"),o(),r(3,"p-iconfield"),u(4,"p-inputicon",16),r(5,"input",17),h("input",function(n){l(t);let g=p(),c=ne(6);return s(g.onGlobalFilter(c,n))}),o()()()}}function Re(i,e){i&1&&(r(0,"tr")(1,"th",18),u(2,"p-tableHeaderCheckbox"),o(),r(3,"th",18),f(4,"Id"),o(),r(5,"th",19),f(6," Name "),u(7,"p-sortIcon",20),o(),u(8,"th",21),o())}function Be(i,e){if(i&1){let t=_();r(0,"tr")(1,"td"),u(2,"p-tableCheckbox",22),o(),r(3,"td"),f(4),o(),r(5,"td"),f(6),o(),r(7,"td")(8,"p-button",23),h("click",function(){let n=l(t).$implicit,g=p();return s(g.editCategory(n))}),o()()()}if(i&2){let t=e.$implicit;m(2),d("value",t),m(2),D(t.id),m(2),D(t.name),m(2),d("rounded",!0)("outlined",!0)}}function Ne(i,e){i&1&&(r(0,"small",29),f(1,"Name is required."),o())}function Oe(i,e){if(i&1){let t=_();r(0,"app-loading",24)(1,"div",25)(2,"div")(3,"label",26),f(4,"Name"),o(),r(5,"input",27),w("ngModelChange",function(n){l(t);let g=p();return v(g.category.name,n)||(g.category.name=n),s(n)}),o(),y(6,Ne,2,0,"small",28),o()()()}if(i&2){let t=p();d("loading",t.formLoading),m(5),x("ngModel",t.category.name),m(),d("ngIf",t.submitted&&!t.category.name)}}function Pe(i,e){if(i&1){let t=_();r(0,"p-button",30),h("click",function(){l(t);let n=p();return s(n.closeDialog())}),o(),r(1,"p-button",31),h("click",function(){l(t);let n=p();return s(n.saveCategory())}),o()}}var Me=class i{service=b(V);message=b(E);confirmationService=b(S);categories=te([]);selectedCategories=[];category={name:""};categoryDialog=!1;submitted=!1;formLoading=!1;tableLoading=!1;cols=[{field:"id",header:"Id",customExportHeader:"id"},{field:"name",header:"name"}];ngOnInit(){this.fetchCategories()}fetchCategories(){this.tableLoading=!0,this.service.getAll().subscribe({next:e=>{this.tableLoading=!1,this.categories.set(e)},error:e=>{this.message.add({severity:"error",summary:"Error",detail:e.error.message}),this.tableLoading=!1}})}onGlobalFilter(e,t){e.filterGlobal(t.target.value,"contains")}newCategory(){this.category={name:""},this.submitted=!1,this.categoryDialog=!0}saveCategory(){this.submitted=!0,this.category.name.trim()&&(this.formLoading=!0,this.category.id?this.service.update(this.category.id,this.category).subscribe({next:()=>{this.categoryDialog=!1,this.submitted=!1,this.formLoading=!1,this.fetchCategories()},error:e=>{this.message.add({severity:"error",summary:"Error",detail:e.error.message}),this.formLoading=!1},complete:()=>{console.log("Category update completed")}}):this.service.create(this.category).subscribe({next:()=>{this.categoryDialog=!1,this.submitted=!1,this.category={name:""},this.formLoading=!1,this.fetchCategories()},error:e=>{this.message.add({severity:"error",summary:"Error",detail:e.error.message}),this.formLoading=!1},complete:()=>{console.log("Category creation completed")}}))}deleteCategory(e){throw new Error("Method not implemented.")}editCategory(e){this.category={id:e.id,name:e.name},this.submitted=!1,this.categoryDialog=!0}closeDialog(){this.categoryDialog=!1,this.submitted=!1}deleteSelectedCategories(){this.confirmationService.confirm({message:"Are you sure you want to delete the selected categories?",header:"Confirm",icon:"pi pi-exclamation-triangle",accept:()=>{this.tableLoading=!0,Q(this.selectedCategories).pipe(X(e=>this.service.delete(e.id)),Y(()=>{this.fetchCategories(),this.selectedCategories=[],this.tableLoading=!1,this.message.add({severity:"success",summary:"Success",detail:"Categories deleted successfully"})})).subscribe({error:e=>{this.message.add({severity:"error",summary:"Error",detail:e.error.message})}})}})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=ie({type:i,selectors:[["app-categories"]],decls:20,vars:17,consts:[["start",""],["end",""],["dt",""],["caption",""],["header",""],["body",""],["content",""],["footer",""],["styleClass","mb-6"],["dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} products",3,"selectionChange","loading","value","rows","columns","paginator","globalFilterFields","selection","rowHover","showCurrentPageReport","rowsPerPageOptions"],["header","Category Details",3,"visibleChange","visible","modal"],["label","New","icon","pi pi-plus","severity","secondary",1,"mr-2",3,"click"],["severity","secondary","label","Delete","icon","pi pi-trash","outlined","",3,"click","disabled"],["label","Export","icon","pi pi-upload","severity","secondary"],[1,"flex","items-center","justify-between"],[1,"m-0"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Search...",3,"input"],[2,"width","3rem"],["pSortableColumn","name"],["field","name"],[2,"width","5rem"],[3,"value"],["icon","pi pi-pencil",1,"mr-2",3,"click","rounded","outlined"],[3,"loading"],[1,"flex","flex-col","gap-6","min-h-80"],["for","name",1,"block","font-bold","mb-3"],["type","text","pInputText","","id","name","required","","autofocus","","fluid","",3,"ngModelChange","ngModel"],["class","text-red-500",4,"ngIf"],[1,"text-red-500"],["label","Cancel","icon","pi pi-times","text","",3,"click"],["label","Save","icon","pi pi-check",3,"click"]],template:function(t,a){if(t&1){let n=_();r(0,"p-toolbar",8),y(1,De,2,1,"ng-template",null,0,C)(3,Le,1,0,"ng-template",null,1,C),o(),r(5,"p-table",9,2),w("selectionChange",function(c){return l(n),v(a.selectedCategories,c)||(a.selectedCategories=c),s(c)}),y(7,Fe,6,0,"ng-template",null,3,C)(9,Re,9,0,"ng-template",null,4,C)(11,Be,9,5,"ng-template",null,5,C),o(),r(13,"p-dialog",10),w("visibleChange",function(c){return l(n),v(a.categoryDialog,c)||(a.categoryDialog=c),s(c)}),y(14,Oe,7,3,"ng-template",null,6,C)(16,Pe,2,0,"ng-template",null,7,C),o(),u(18,"p-toast")(19,"p-confirmdialog")}t&2&&(m(5),d("loading",a.tableLoading)("value",a.categories())("rows",10)("columns",a.cols)("paginator",!0)("globalFilterFields",T(14,Ie)),x("selection",a.selectedCategories),d("rowHover",!0)("showCurrentPageReport",!0)("rowsPerPageOptions",T(15,Ve)),m(8),re(T(16,ke)),x("visible",a.categoryDialog),d("modal",!0))},dependencies:[k,ae,_e,he,be,ye,xe,se,me,ce,pe,ge,Te,Se,ue,ve,Ce,fe,we,M],encapsulation:2})};export{Me as CategoriesComponent};
