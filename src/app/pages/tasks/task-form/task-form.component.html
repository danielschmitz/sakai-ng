<p-dialog [(visible)]="visible" [style]="{ width: '450px', height: 'auto' }" header="Task Details" [modal]="true" class="p-fluid" (onHide)="onHide()">
    <ng-template #content>
        <div class="flex flex-col gap-4 py-2">

            <p-floatlabel variant="on">
                <p-dropdown id="category" [options]="categories()" [(ngModel)]="task.categoryId" optionLabel="name" optionValue="id" [ngClass]="{ 'ng-invalid ng-dirty': submitted && !task.categoryId }"></p-dropdown>
                <label for="category">Category</label>
            </p-floatlabel>

            <p-floatlabel variant="on" >
                <input type="text" id="name" pInputText [(ngModel)]="task.name" [ngClass]="{ 'ng-invalid ng-dirty': submitted && !task.name, 'w-full': true }"/>
                <label for="name">Name</label>
            </p-floatlabel>
            <small class="p-error" *ngIf="submitted && !task.name">Name is required.</small>

            <p-floatlabel variant="on">
                <input type="text" id="description" pInputText [(ngModel)]="task.description" [ngClass]="{ 'ng-invalid ng-dirty': submitted && !task.description, 'w-full': true }" />
                <label for="description">Description</label>
            </p-floatlabel>
            <small class="p-error" *ngIf="submitted && !task.description">Description is required.</small>
          
            <small class="p-error" *ngIf="submitted && !task.categoryId">Category is required.</small>
            <div class="flex flex-row">
                <p-checkbox id="done" [(ngModel)]="task.done" [binary]="true" [ngClass]="{ 'ng-invalid': submitted && task.done === undefined }"> </p-checkbox>
                <label for="done" class="ml-2">Done</label>
            </div>
        </div>
    </ng-template>
    <ng-template #footer>
        <button pButton pRipple label="Cancel" icon="pi pi-times" class="p-button-text" (click)="onHide()"></button>
        <button pButton pRipple [loading]="loading" label="Save" icon="pi pi-check" class="p-button-text" (click)="onSave()"></button>
    </ng-template>
</p-dialog>
