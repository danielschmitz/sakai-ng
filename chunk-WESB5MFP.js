import{b as pe}from"./chunk-N6SJY7JP.js";import{e as se,f as me,h as ce,j as ge,l as de,m as ue,n as fe,o as _e,p as Ce}from"./chunk-VTIRUYXY.js";import{A as Y,B as Z,F as ee,J as te,K as ie,N as oe,O as re,R as ne,S as ae,U as le,x as J,y as Q,z as X}from"./chunk-P5WYUP4P.js";import{a as he}from"./chunk-D4INGOLP.js";import{a as q}from"./chunk-7MJ4RZQ5.js";import{Ha as N,Ka as W,Ma as U,Ra as H,Ta as $,Xa as j,b as O,mb as A,nb as G,ra as M,sb as K,tb as z}from"./chunk-F7I2I54E.js";import{$ as b,$a as k,Db as r,Eb as o,Fb as d,Jb as C,Lb as h,Mb as u,Qc as B,Ua as p,V,Xb as F,Yb as f,Yc as P,Zb as I,ac as x,bc as w,cc as v,dc as R,ec as T,fb as D,ha as s,ia as m,mb as y,sc as _,ub as g,xb as L}from"./chunk-PU3EP6RD.js";var E=class{constructor(e){this.resourceName=e;this.apiBaseUrl=`${q.baseUrl}/${e}`}http=b(O);apiBaseUrl;getAll(){return this.http.get(`${this.apiBaseUrl}`)}getById(e){return this.http.get(`${this.apiBaseUrl}/${e}`)}create(e){return this.http.post(`${this.apiBaseUrl}`,e)}update(e,t){return this.http.put(`${this.apiBaseUrl}/${e}`,t)}delete(e){return this.http.delete(`${this.apiBaseUrl}/${e}`)}};var S=class i extends E{constructor(){super("categories")}static \u0275fac=function(t){return new(t||i)};static \u0275prov=V({token:i,factory:i.\u0275fac,providedIn:"root"})};var xe=()=>["name","country.name","representative.name","status"],we=()=>[10,20,30],ve=()=>({width:"450px"});function Te(i,e){if(i&1){let t=C();r(0,"p-button",11),h("click",function(){s(t);let n=u();return m(n.newCategory())}),o(),d(1,"p-button",12)}}function Ee(i,e){i&1&&d(0,"p-button",13)}function Se(i,e){if(i&1){let t=C();r(0,"div",14)(1,"h5",15),f(2,"Categories"),o(),r(3,"p-iconfield"),d(4,"p-inputicon",16),r(5,"input",17),h("input",function(n){s(t);let l=u(),c=F(6);return m(l.onGlobalFilter(c,n))}),o()()()}}function Ie(i,e){i&1&&(r(0,"tr")(1,"th",18),d(2,"p-tableHeaderCheckbox"),o(),r(3,"th",18),f(4,"Id"),o(),r(5,"th",19),f(6," Name "),d(7,"p-sortIcon",20),o(),d(8,"th",21),o())}function Me(i,e){if(i&1){let t=C();r(0,"tr")(1,"td"),d(2,"p-tableCheckbox",22),o(),r(3,"td"),f(4),o(),r(5,"td"),f(6),o(),r(7,"td")(8,"p-button",23),h("click",function(){let n=s(t).$implicit,l=u();return m(l.editCategory(n))}),o(),r(9,"p-button",24),h("click",function(){let n=s(t).$implicit,l=u();return m(l.deleteCategory(n))}),o()()()}if(i&2){let t=e.$implicit;p(2),g("value",t),p(2),I(t.id),p(2),I(t.name),p(2),g("rounded",!0)("outlined",!0),p(),g("rounded",!0)("outlined",!0)}}function Ve(i,e){i&1&&(r(0,"small",30),f(1,"Name is required."),o())}function ke(i,e){if(i&1){let t=C();r(0,"app-loading",25)(1,"div",26)(2,"div")(3,"label",27),f(4,"Name"),o(),r(5,"input",28),v("ngModelChange",function(n){s(t);let l=u();return w(l.category.name,n)||(l.category.name=n),m(n)}),o(),y(6,Ve,2,0,"small",29),o()()()}if(i&2){let t=u();g("loading",t.formLoading),p(5),x("ngModel",t.category.name),p(),g("ngIf",t.submitted&&!t.category.name)}}function De(i,e){if(i&1){let t=C();r(0,"p-button",31),h("click",function(){s(t);let n=u();return m(n.closeDialog())}),o(),r(1,"p-button",32),h("click",function(){s(t);let n=u();return m(n.saveCategory())}),o()}}var be=class i{service=b(S);message=b(M);categories=k([]);selectedCategories=[];category={name:""};categoryDialog=!1;submitted=!1;formLoading=!1;tableLoading=!1;cols=[{field:"id",header:"Id",customExportHeader:"id"},{field:"name",header:"name"}];ngOnInit(){this.fetchCategories()}fetchCategories(){this.tableLoading=!0,this.service.getAll().subscribe({next:e=>{this.tableLoading=!1,this.categories.set(e)},error:e=>{this.message.add({severity:"error",summary:"Error",detail:e.error.message}),this.tableLoading=!1}})}onGlobalFilter(e,t){e.filterGlobal(t.target.value,"contains")}newCategory(){this.category={name:""},this.submitted=!1,this.categoryDialog=!0}saveCategory(){this.submitted=!0,this.category.name.trim()&&(this.formLoading=!0,this.category.id?this.service.update(this.category.id,this.category).subscribe({next:()=>{this.categoryDialog=!1,this.submitted=!1,this.formLoading=!1,this.fetchCategories()},error:e=>{this.message.add({severity:"error",summary:"Error",detail:e.error.message}),this.formLoading=!1},complete:()=>{console.log("Category update completed")}}):this.service.create(this.category).subscribe({next:()=>{this.categoryDialog=!1,this.submitted=!1,this.category={name:""},this.formLoading=!1,this.fetchCategories()},error:e=>{this.message.add({severity:"error",summary:"Error",detail:e.error.message}),this.formLoading=!1},complete:()=>{console.log("Category creation completed")}}))}deleteCategory(e){throw new Error("Method not implemented.")}editCategory(e){this.category={id:e.id,name:e.name},this.submitted=!1,this.categoryDialog=!0}closeDialog(){this.categoryDialog=!1,this.submitted=!1}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=D({type:i,selectors:[["app-categories"]],features:[R([M])],decls:19,vars:17,consts:[["start",""],["end",""],["dt",""],["caption",""],["header",""],["body",""],["content",""],["footer",""],["styleClass","mb-6"],["dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} products",3,"selectionChange","loading","value","rows","columns","paginator","globalFilterFields","selection","rowHover","showCurrentPageReport","rowsPerPageOptions"],["header","Category Details",3,"visibleChange","visible","modal"],["label","New","icon","pi pi-plus","severity","secondary",1,"mr-2",3,"click"],["severity","secondary","label","Delete","icon","pi pi-trash","outlined",""],["label","Export","icon","pi pi-upload","severity","secondary"],[1,"flex","items-center","justify-between"],[1,"m-0"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Search...",3,"input"],[2,"width","3rem"],["pSortableColumn","name"],["field","name"],[2,"width","10rem"],[3,"value"],["icon","pi pi-pencil",1,"mr-2",3,"click","rounded","outlined"],["icon","pi pi-trash","severity","danger",3,"click","rounded","outlined"],[3,"loading"],[1,"flex","flex-col","gap-6","min-h-80"],["for","name",1,"block","font-bold","mb-3"],["type","text","pInputText","","id","name","required","","autofocus","","fluid","",3,"ngModelChange","ngModel"],["class","text-red-500",4,"ngIf"],[1,"text-red-500"],["label","Cancel","icon","pi pi-times","text","",3,"click"],["label","Save","icon","pi pi-check",3,"click"]],template:function(t,a){if(t&1){let n=C();r(0,"p-toolbar",8),y(1,Te,2,0,"ng-template",null,0,_)(3,Ee,1,0,"ng-template",null,1,_),o(),r(5,"p-table",9,2),v("selectionChange",function(c){return s(n),w(a.selectedCategories,c)||(a.selectedCategories=c),m(c)}),y(7,Se,6,0,"ng-template",null,3,_)(9,Ie,9,0,"ng-template",null,4,_)(11,Me,10,7,"ng-template",null,5,_),o(),r(13,"p-dialog",10),v("visibleChange",function(c){return s(n),w(a.categoryDialog,c)||(a.categoryDialog=c),m(c)}),y(14,ke,7,3,"ng-template",null,6,_)(16,De,2,0,"ng-template",null,7,_),o(),d(18,"p-toast")}t&2&&(p(5),g("loading",a.tableLoading)("value",a.categories())("rows",10)("columns",a.cols)("paginator",!0)("globalFilterFields",T(14,xe)),x("selection",a.selectedCategories),g("rowHover",!0)("showCurrentPageReport",!0)("rowsPerPageOptions",T(15,we)),p(8),L(T(16,ve)),x("visible",a.categoryDialog),g("modal",!0))},dependencies:[P,B,le,ie,oe,re,ne,ae,$,N,W,H,U,G,A,j,fe,ue,Ce,_e,ce,z,K,de,ee,te,J,me,se,ge,Z,Y,X,Q,pe,he],encapsulation:2})};export{be as CategoriesComponent};
